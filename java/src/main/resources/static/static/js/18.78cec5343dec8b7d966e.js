webpackJsonp([18],{K3oE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("lC5x"),s=n.n(i),r=n("J0Oq"),a=n.n(r),c=n("0Njg"),o=n("R2SV"),l={data:function(){return{getCusInterfacesItemListApi:c.E,width:1e3,height:618,disabled:!0,id:this.$route.params.cusInterfacesId,name:null,fork:!1,face:null,cus:null,selections:null,items:null,env:"testDomain"}},computed:{},methods:{envChanged:function(e){this.env=e,this.loadItems()},onSelectCusInterfacesItem:function(e){this.selections=(e||[]).map(function(e){return e.id}),this.loadItems()},init:function(){var e=this;return a()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.id){t.next=12;break}return t.next=3,Object(c.C)(e.id);case 3:return e.cus=t.sent,t.next=6,Object(c.I)(e.cus.interfacesId);case 6:return e.face=t.sent,e.name=e.face.complexName,t.next=10,Object(c.E)({customInterfacesId:e.cus.id,rows:1e4});case 10:e.items=t.sent,e.items&&e.items.length>0&&(e.selections=e.items.map(function(e){return e.id}),e.loadItems());case 12:case"end":return t.stop()}},t,e)}))()},run:function(e){this.disabled=!0,this.$refs.runner.run(1,e,this.fork)},saveHistory:function(){this.$refs.runner.saveHistory()},finished:function(){this.disabled=!1},loadItems:function(){var e=this;return a()(s.a.mark(function t(){var n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.disabled=!0,t.next=4,Object(c.J)(e.env,e.face.end.id,!0);case 4:n=t.sent,i=e.items.filter(function(t){return e.selections.indexOf(t.id)>=0}).map(function(e){return e.headers=e.cusHeaders?JSON.parse(e.cusHeaders):[],e.headers=Object(o.n)(n.map(function(e){return e}),e.headers,!0),e}),setTimeout(function(){e.$refs.runner.deleteAll(),e.$refs.runner.batchAddNodes(e.face,i),e.disabled=!1},800),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.$alert("默认登录授权失败","提示",{type:"error"});case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()}},components:{"v-selector":function(){return n.e(30).then(n.bind(null,"qNHp"))},"v-runner":function(){return n.e(34).then(n.bind(null,"V7zm"))}},mounted:function(){this.width=this.$el.clientWidth-100,this.init(),window.tt=this}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"title"},[e._v("单接口批量执行用例")]),e._v(" "),n("hr"),e._v(" "),n("el-form",{ref:"edit",attrs:{"label-width":"8em"}},[n("el-form-item",{attrs:{label:"接口名称:"}},[e._v("\n      "+e._s(e.name)+"\n    ")]),e._v(" "),n("el-form-item",{attrs:{label:"并行执行:"}},[n("el-switch",{model:{value:e.fork,callback:function(t){e.fork=t},expression:"fork"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"执行用例:"}},[e.selections?n("v-selector",{ref:"selector",staticStyle:{width:"35%","text-indent":"0","margin-left":"20px"},attrs:{id:"id",text:"name",onSelectionChanged:e.onSelectCusInterfacesItem,placeholder:"请选择一个历史保存的用例",remote:!0,multiple:!0,url:e.getCusInterfacesItemListApi,load:e.selections,extraParams:e.id?{customInterfacesId:e.id,rows:1e4}:{customInterfacesId:-1}}}):e._e()],1),e._v(" "),n("el-form-item",{staticStyle:{"margin-left":"-3em"}},[n("v-runner",{ref:"runner",staticStyle:{"line-height":"20px"},attrs:{width:e.width,height:e.height,finished:e.finished,prepared:e.finished,envChanged:e.envChanged}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"info",icon:"el-icon-back"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")]),e._v(" "),n("el-button",{attrs:{type:"success",icon:e.disabled?"el-icon-loading":"el-icon-magic-stick",disabled:e.disabled},on:{click:function(t){return e.run(!1)}}},[e._v("运行")]),e._v(" "),n("el-button",{attrs:{type:"success",icon:e.disabled?"el-icon-loading":"el-icon-video-camera-solid",disabled:e.disabled},on:{click:e.saveHistory}},[e._v("保存执行结果")])],1)],1)],1)},staticRenderFns:[]};var d=n("C7Lr")(l,u,!1,function(e){n("MNMu")},"data-v-28817826",null);t.default=d.exports},MNMu:function(e,t){}});
//# sourceMappingURL=18.78cec5343dec8b7d966e.js.map