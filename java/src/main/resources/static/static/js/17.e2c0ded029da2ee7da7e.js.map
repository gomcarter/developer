{"version":3,"sources":["webpack:///src/page/system/user/index.vue","webpack:///./src/page/system/user/index.vue?7f7d","webpack:///./src/page/system/user/index.vue"],"names":["user","data","_this","this","isAdmin","Object","login","currentUser","disabled","setting","remote","url","test","username","password","filter","id","name","mail","cellphone","createTimeGE","createTimeLE","modifyTimeGE","modifyTimeLE","dataUrl","inserv_api","countUrl","params","toolbar","title","icon","handler","$router","push","columns","field","header","sort","width","formatter","row","index","value","utils","actions","text","show","r","delete","mounted","load","methods","openTestDialog","$refs","testDialog","open","_this2","then","d","catch","$alert","type","remoteChanged","doTest","_this3","save","_this4","settingForm","validate","valid","$success","_this5","$confirm","search","clear","components","v-dialog","__webpack_require__","e","bind","v-datagrid","v-jsonformatter","system_user","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_e","attrs","label-width","label","on","change","model","callback","$$v","$set","expression","ref","rules","required","message","trigger","prop","placeholder","json","code","minHeight","click","style","margin-left","inline","nativeOn","keypress","$event","indexOf","_k","keyCode","key","value-format","data-url","count-url","ok","ok-text","cancel-text","slot","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.e2c0ded029da2ee7da7e.js","sourcesContent":["<template>\n  <div v-if=\"setting.remote != null\">\n    <h4 class=\"title\" v-if=\"isAdmin\">设置</h4>\n    <hr v-if=\"isAdmin\"/>\n    <el-form label-width=\"10em\">\n      <el-form-item label=\"是否开启外部登录\" class=\"label\" v-if=\"isAdmin\">\n        <el-switch v-model=\"setting.remote\" @change=\"remoteChanged\"></el-switch>\n      </el-form-item>\n    </el-form>\n    <div v-if=\"setting.remote === true\">\n      <el-form :model=\"setting\" label-width=\"10em\" v-if=\"isAdmin\" ref=\"settingForm\">\n        <el-form-item label=\"登录URL\" :rules=\"[{ required: true, message: '请输入登录URL', trigger: ['blur', 'change'] }]\" prop=\"url\">\n          <el-input v-model=\"setting.url\" placeholder=\"请输入登录URL\" ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <div class=\"mark\">设置url需支持POST请求，且登录用户名参数为：username，密码参数为：password；返回数据结果需要如下：</div>\n          <v-jsonformatter :width=\"600\" :json=\"{code: '0 —— 表示登录成功，其他 —— 表示登录失败', message: '登录失败原因'}\" :minHeight=\"100\"></v-jsonformatter>\n          <div class=\"mark red\">注意：如果开启了外部登录，但是登录不成功，您依然可以是使用admin账户登录到本系统</div>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"save\" :icon=\"disabled?'el-icon-loading':'el-icon-check'\" :disabled=\"disabled\">保存设置</el-button>\n          <el-button type=\"success\" @click=\"openTestDialog\" icon=\"el-icon-s-promotion\" :disabled=\"disabled\">测试登录</el-button>\n        </el-form-item>\n      </el-form>\n      <el-form label-width=\"10em\" v-else>\n        <el-form-item class=\"label\" >\n          <h3>当前已开启外部登录，用户管理功能被禁用。</h3>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div v-else-if=\"setting.remote === false\" :style=\"{ 'margin-left': isAdmin ? '4em' : '' }\">\n      <h4 class=\"title\">筛选条件</h4>\n      <hr/>\n      <div class=\"filters\">\n        <el-form :inline=\"true\" :model=\"filter\" label-width=\"6em\">\n          <el-form-item label=\"编号\">\n            <el-input v-model=\"filter.id\" placeholder=\"请输入编号\" @keypress.enter.native=\"search\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"账号\">\n            <el-input v-model=\"filter.username\" placeholder=\"请输入账号\" @keypress.enter.native=\"search\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"姓名\">\n            <el-input v-model=\"filter.name\" placeholder=\"请输入姓名\" @keypress.enter.native=\"search\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\">\n            <el-input v-model=\"filter.mail\" placeholder=\"请输入邮箱\" @keypress.enter.native=\"search\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"联系电话\">\n            <el-input v-model=\"filter.cellphone\" placeholder=\"请输入联系电话\" @keypress.enter.native=\"search\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"创建时间\">\n            <el-date-picker v-model=\"filter.createTimeGE\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\" @keypress.enter.native=\"search\"></el-date-picker>\n            至\n            <el-date-picker v-model=\"filter.createTimeLE\" value-format=\"yyyy-MM-dd\" type=\"date\"  placeholder=\"选择日期\" @keypress.enter.native=\"search\"></el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"修改时间\">\n            <el-date-picker v-model=\"filter.modifyTimeGE\" value-format=\"yyyy-MM-dd\" type=\"date\" placeholder=\"选择日期\" @keypress.enter.native=\"search\"></el-date-picker>\n            至\n            <el-date-picker v-model=\"filter.modifyTimeLE\" value-format=\"yyyy-MM-dd\" type=\"date\"  placeholder=\"选择日期\" @keypress.enter.native=\"search\"></el-date-picker>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"search\" icon=\"el-icon-search\">搜索</el-button>\n            <el-button type=\"info\" @click=\"clear\" icon=\"el-icon-delete\">清空</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n      <h4 class=\"title\">自定义函数列表</h4>\n      <hr/>\n      <v-datagrid :columns=\"columns\" :data-url=\"dataUrl\" :count-url=\"countUrl\" :params=\"params\" :toolbar=\"toolbar\"/>\n    </div>\n    <v-dialog ref=\"testDialog\" label-width=\"6em\" title=\"测试登录\" :ok=\"doTest\" ok-text=\"开始测试\" cancel-text=\"关闭\">\n      <el-form slot=\"body\" :model=\"test\" ref=\"testForm\" label-width=\"6em\" >\n        <el-form-item label=\"账号\" prop=\"username\" :rules=\"[{ required: true, message: '请输入账号', trigger: ['blur', 'change'] }]\">\n          <el-input v-model=\"test.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\" :rules=\"[{ required: true, message: '请输入密码', trigger: ['blur', 'change'] }]\">\n          <el-input v-model=\"test.password\" placeholder=\"请输入新密码，长度随便设，只要你记得住\"></el-input>\n        </el-form-item>\n      </el-form>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\nimport { userListApi, userCountApi, deleteUserApi, getUserSettingApi, updateUserSettingApi, testRemoteLoginApi } from '@/config/api/inserv-api'\nimport { formatDate, removeBlank } from '@/config/utils'\nimport { isAdmin, user } from '@/config/login'\n\nexport default {\n  data () {\n    return {\n      isAdmin: isAdmin(),\n      currentUser: user(),\n      disabled: false,\n      setting: {\n        remote: null,\n        url: null\n      },\n      test: {\n        username: 'admin',\n        password: '3e27f65cdf23407d9c3a72297567c5fa'\n      },\n      filter: {\n        id: null,\n        username: null,\n        name: null,\n        mail: null,\n        cellphone: null,\n        createTimeGE: null,\n        createTimeLE: null,\n        modifyTimeGE: null,\n        modifyTimeLE: null\n      },\n      dataUrl: userListApi,\n      countUrl: userCountApi,\n      params: {},\n      toolbar: [{\n        title: '新增',\n        icon: 'el-icon-plus',\n        handler: () => this.$router.push(`/system/user/edit`)\n      }],\n      columns: [\n        {field: 'id', header: '编号', sort: 'id', width: 100},\n        {field: 'username', header: '账号', sort: 'username', width: 140},\n        {field: 'name', header: '姓名', sort: 'name', width: 140},\n        {field: 'mail', header: '邮箱', sort: 'mail', width: 200},\n        {field: 'cellphone', header: '联系电话', sort: 'cellphone', width: 140},\n        {field: 'createTime', header: '添加时间', sort: 'create_time', width: 230, formatter: (row, index, value) => formatDate(value)},\n        {field: 'modifyTime', header: '修改时间', sort: 'modify_time', width: 230, formatter: (row, index, value) => formatDate(value)},\n        {\n          field: 'action',\n          header: '操作',\n          width: 230,\n          actions: [{\n            text: '【编辑】',\n            // admin或者是自己才有权限，并且admin不接受编辑\n            show: (r) => (this.isAdmin || r.username === this.currentUser) && !isAdmin(r.username),\n            handler: (row) => this.$router.push(`/system/user/edit/${row.id}`)\n          }, {\n            text: '【删除】',\n            // admin才有权限，并且admin不接受编辑\n            show: (r) => this.isAdmin && !isAdmin(r.username),\n            handler: (row) => this.delete(row.id)\n          }]\n        }\n      ]\n    }\n  },\n  mounted () {\n    this.load()\n  },\n  methods: {\n    openTestDialog () {\n      this.$refs.testDialog.open()\n    },\n    load () {\n      getUserSettingApi()\n        .then((d) => {\n          this.setting.remote = d.remote || false\n          this.setting.url = d.url\n        })\n        .catch(() => {\n          this.$alert('读取配置数据失败！', '提示', {type: 'error'})\n        })\n    },\n    remoteChanged () {\n      if (this.setting.remote === false) {\n        updateUserSettingApi(this.setting)\n      }\n    },\n    doTest () {\n      testRemoteLoginApi({\n        url: this.setting.url,\n        username: this.test.username,\n        password: this.test.password\n      }).then(d => {\n        this.$alert('测试登录成功！', '提示', {type: 'success'})\n      }).catch(() => {})\n    },\n    save () {\n      this.$refs.settingForm.validate((valid) => {\n        if (valid) {\n          this.disabled = true\n          updateUserSettingApi(this.setting)\n            .then(d => {\n              this.disabled = false\n              this.$success(`保存成功！`)\n              this.disabled = false\n            })\n            .catch(() => {\n              this.disabled = false\n            })\n        }\n      })\n    },\n    delete (id) {\n      this.$confirm('删除将无法恢复，确认删除吗？', '提示', {type: 'warning'}).then(() => {\n        deleteUserApi(id)\n          .then(() => {\n            this.$success('删除成功！')\n            this.search()\n          })\n      })\n    },\n    search () {\n      this.params = removeBlank(this.filter)\n    },\n    clear () {\n      this.params = {}\n      this.filter = {}\n    }\n  },\n  components: {\n    'v-dialog': () => import('@/components/dialog'),\n    'v-datagrid': () => import('@/components/datagrid'),\n    'v-jsonformatter': () => import('@/components/jsonformatter')\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  @import 'index.scss';\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/system/user/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.setting.remote != null)?_c('div',[(_vm.isAdmin)?_c('h4',{staticClass:\"title\"},[_vm._v(\"设置\")]):_vm._e(),_vm._v(\" \"),(_vm.isAdmin)?_c('hr'):_vm._e(),_vm._v(\" \"),_c('el-form',{attrs:{\"label-width\":\"10em\"}},[(_vm.isAdmin)?_c('el-form-item',{staticClass:\"label\",attrs:{\"label\":\"是否开启外部登录\"}},[_c('el-switch',{on:{\"change\":_vm.remoteChanged},model:{value:(_vm.setting.remote),callback:function ($$v) {_vm.$set(_vm.setting, \"remote\", $$v)},expression:\"setting.remote\"}})],1):_vm._e()],1),_vm._v(\" \"),(_vm.setting.remote === true)?_c('div',[(_vm.isAdmin)?_c('el-form',{ref:\"settingForm\",attrs:{\"model\":_vm.setting,\"label-width\":\"10em\"}},[_c('el-form-item',{attrs:{\"label\":\"登录URL\",\"rules\":[{ required: true, message: '请输入登录URL', trigger: ['blur', 'change'] }],\"prop\":\"url\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入登录URL\"},model:{value:(_vm.setting.url),callback:function ($$v) {_vm.$set(_vm.setting, \"url\", $$v)},expression:\"setting.url\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('div',{staticClass:\"mark\"},[_vm._v(\"设置url需支持POST请求，且登录用户名参数为：username，密码参数为：password；返回数据结果需要如下：\")]),_vm._v(\" \"),_c('v-jsonformatter',{attrs:{\"width\":600,\"json\":{code: '0 —— 表示登录成功，其他 —— 表示登录失败', message: '登录失败原因'},\"minHeight\":100}}),_vm._v(\" \"),_c('div',{staticClass:\"mark red\"},[_vm._v(\"注意：如果开启了外部登录，但是登录不成功，您依然可以是使用admin账户登录到本系统\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":_vm.disabled?'el-icon-loading':'el-icon-check',\"disabled\":_vm.disabled},on:{\"click\":_vm.save}},[_vm._v(\"保存设置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-s-promotion\",\"disabled\":_vm.disabled},on:{\"click\":_vm.openTestDialog}},[_vm._v(\"测试登录\")])],1)],1):_c('el-form',{attrs:{\"label-width\":\"10em\"}},[_c('el-form-item',{staticClass:\"label\"},[_c('h3',[_vm._v(\"当前已开启外部登录，用户管理功能被禁用。\")])])],1)],1):(_vm.setting.remote === false)?_c('div',{style:({ 'margin-left': _vm.isAdmin ? '4em' : '' })},[_c('h4',{staticClass:\"title\"},[_vm._v(\"筛选条件\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"filters\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.filter,\"label-width\":\"6em\"}},[_c('el-form-item',{attrs:{\"label\":\"编号\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入编号\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.id),callback:function ($$v) {_vm.$set(_vm.filter, \"id\", $$v)},expression:\"filter.id\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"账号\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入账号\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.username),callback:function ($$v) {_vm.$set(_vm.filter, \"username\", $$v)},expression:\"filter.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"姓名\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入姓名\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.name),callback:function ($$v) {_vm.$set(_vm.filter, \"name\", $$v)},expression:\"filter.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入邮箱\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.mail),callback:function ($$v) {_vm.$set(_vm.filter, \"mail\", $$v)},expression:\"filter.mail\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入联系电话\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.cellphone),callback:function ($$v) {_vm.$set(_vm.filter, \"cellphone\", $$v)},expression:\"filter.cellphone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"创建时间\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.createTimeGE),callback:function ($$v) {_vm.$set(_vm.filter, \"createTimeGE\", $$v)},expression:\"filter.createTimeGE\"}}),_vm._v(\"\\n          至\\n          \"),_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.createTimeLE),callback:function ($$v) {_vm.$set(_vm.filter, \"createTimeLE\", $$v)},expression:\"filter.createTimeLE\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"修改时间\"}},[_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.modifyTimeGE),callback:function ($$v) {_vm.$set(_vm.filter, \"modifyTimeGE\", $$v)},expression:\"filter.modifyTimeGE\"}}),_vm._v(\"\\n          至\\n          \"),_c('el-date-picker',{attrs:{\"value-format\":\"yyyy-MM-dd\",\"type\":\"date\",\"placeholder\":\"选择日期\"},nativeOn:{\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.search($event)}},model:{value:(_vm.filter.modifyTimeLE),callback:function ($$v) {_vm.$set(_vm.filter, \"modifyTimeLE\", $$v)},expression:\"filter.modifyTimeLE\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"icon\":\"el-icon-delete\"},on:{\"click\":_vm.clear}},[_vm._v(\"清空\")])],1)],1)],1),_vm._v(\" \"),_c('h4',{staticClass:\"title\"},[_vm._v(\"自定义函数列表\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('v-datagrid',{attrs:{\"columns\":_vm.columns,\"data-url\":_vm.dataUrl,\"count-url\":_vm.countUrl,\"params\":_vm.params,\"toolbar\":_vm.toolbar}})],1):_vm._e(),_vm._v(\" \"),_c('v-dialog',{ref:\"testDialog\",attrs:{\"label-width\":\"6em\",\"title\":\"测试登录\",\"ok\":_vm.doTest,\"ok-text\":\"开始测试\",\"cancel-text\":\"关闭\"}},[_c('el-form',{ref:\"testForm\",attrs:{\"slot\":\"body\",\"model\":_vm.test,\"label-width\":\"6em\"},slot:\"body\"},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"username\",\"rules\":[{ required: true, message: '请输入账号', trigger: ['blur', 'change'] }]}},[_c('el-input',{model:{value:(_vm.test.username),callback:function ($$v) {_vm.$set(_vm.test, \"username\", $$v)},expression:\"test.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\",\"rules\":[{ required: true, message: '请输入密码', trigger: ['blur', 'change'] }]}},[_c('el-input',{attrs:{\"placeholder\":\"请输入新密码，长度随便设，只要你记得住\"},model:{value:(_vm.test.password),callback:function ($$v) {_vm.$set(_vm.test, \"password\", $$v)},expression:\"test.password\"}})],1)],1)],1)],1):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-57121462\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/system/user/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-57121462\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-57121462\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-57121462\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/system/user/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}