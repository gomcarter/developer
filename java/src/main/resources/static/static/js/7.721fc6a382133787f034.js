webpackJsonp([7],{GE5B:function(t,e){},WgrK:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("IHPB"),i=n.n(r),a=n("3cXf"),l=n.n(a),o=n("aA9S"),s=n.n(o),c=n("0Njg"),m=n("Dx6B"),u={data:function(){return{ENV_DOMAIN_MAP:m.b,title:"新增自定义参数",env:"testDomain",form:{id:"",name:"",scriptText:{},mark:"",arguments:"",isPublic:!1},result:""}},computed:{},methods:{init:function(){var t=this;this.$route.params.id&&(this.title="编辑自定义参数",Object(c.G)(this.$route.params.id).then(function(e){t.form=e;try{t.form.scriptText=JSON.parse(e.scriptText)}catch(n){t.form.scriptText={testDomain:e.scriptText}}}).catch(function(t){console.log(t)}))},add:function(){var t=this;this.$refs.edit.validate(function(e){e&&t.$confirm("确定保存？","提示",{type:"info"}).then(function(){if(t.$route.params.id){var e=s()({},t.form,{scriptText:l()(t.form.scriptText)});Object(c._1)(e).then(function(e){t.$transfer({back:"返回编辑",buttons:[{text:"去列表",link:"/flow/function"}]})}).catch(function(){})}else{var n=s()({},t.form,{scriptText:l()(t.form.scriptText)});Object(c.c)(n).then(function(e){t.$transfer({back:"继续添加",buttons:[{text:"去列表",link:"/flow/function"}]})}).catch(function(){})}}).catch(function(){})})},action:function(){try{this.result=new Function((this.form.scriptText[this.env]||"").replace(/\n/g," ")).apply(void 0,i()((this.form.arguments||"").split(","))),console.log("result",this.result)}catch(t){console.log(t),this.result=t.toString()}},handleClickEnv:function(){}},components:{"v-jsonformatter":function(){return n.e(33).then(n.bind(null,"9YOq"))}},mounted:function(){this.init()}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),n("hr"),t._v(" "),n("el-form",{ref:"edit",attrs:{model:t.form}},[n("el-form-item",{staticClass:"min_width",attrs:{label:"参数名称:","label-width":"8em",rules:[{required:!0,message:"请输入规则名称",trigger:["blur","change"]}],prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入自定义参数名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{staticClass:"min_width",staticStyle:{width:"700px"},attrs:{label:"生成规则脚本:","label-width":"8em"}},[n("el-tabs",{staticStyle:{width:"700px"},attrs:{type:"card"},on:{"tab-click":t.handleClickEnv},model:{value:t.env,callback:function(e){t.env=e},expression:"env"}},t._l(t.ENV_DOMAIN_MAP,function(e,r){return n("el-tab-pane",{key:r,attrs:{label:e,value:r,name:r}},[n("el-input",{attrs:{type:"textarea",rows:"15",placeholder:"示例：随机n-m整数的脚本如下\nvar n = +arguments[0];\nvar m = +arguments[1];\nreturn n + Math.floor(Math.random() * (m - n));\n注：arguments为输入参数，在示例参数列输入：n,m（如：200,400）"},model:{value:t.form.scriptText[r],callback:function(e){t.$set(t.form.scriptText,r,e)},expression:"form.scriptText[key]"}})],1)}),1)],1),t._v(" "),n("el-form-item",{staticClass:"min_width",attrs:{label:"示例参数:","label-width":"8em"}},[n("el-input",{attrs:{placeholder:"请输入示例入参，多参数逗号隔开，如：200,400"},model:{value:t.form.arguments,callback:function(e){t.$set(t.form,"arguments",e)},expression:"form.arguments"}})],1),t._v(" "),n("el-form-item",{staticClass:"min_width",attrs:{label:"备注:","label-width":"8em",prop:"mark"}},[n("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.form.mark,callback:function(e){t.$set(t.form,"mark",e)},expression:"form.mark"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"","label-width":"8em"}},[n("el-checkbox",{attrs:{label:"是否公用",checked:t.form.isPublic},model:{value:t.form.isPublic,callback:function(e){t.$set(t.form,"isPublic",e)},expression:"form.isPublic"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"","label-width":"8em"}},[n("el-button",{on:{click:t.action}},[t._v("测试")])],1),t._v(" "),n("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"执行结果:","label-width":"8em"}},[n("v-jsonformatter",{attrs:{json:t.result}})],1),t._v(" "),n("el-form-item",{attrs:{"label-width":"8em"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:t.add}},[t._v("提交")]),t._v(" "),n("el-button",{attrs:{type:"info",icon:"el-icon-back"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var d=n("C7Lr")(u,f,!1,function(t){n("GE5B")},"data-v-0a7801c9",null);e.default=d.exports}});
//# sourceMappingURL=7.721fc6a382133787f034.js.map