webpackJsonp([3],{VC3w:function(e,t){},XZnd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("3cXf"),n=r.n(a),i=r("0Njg"),l=r("Dx6B"),o={data:function(){return{title:"新增模块",form:{id:null,name:null,alias:null},wrapper:[],ENV_DOMAIN_MAP:l.b,preview:{}}},computed:{},methods:{init:function(){var e=this;for(var t in this.$route.params.id&&Object(i.K)(this.$route.params.id).then(function(t){e.form=t,t.wrapper&&(e.wrapper=JSON.parse(t.wrapper))}).catch(function(e){console.log(e)}),this.title=this.$route.params.id?"修改后端服务":"新增后端服务",l.b)this.$set(this.form,t,"");this.previewUpdater()},previewUpdater:function(){var e=this,t=setInterval(function(){if(e.$route.path.startsWith("/provider/list/edit")||clearInterval(t),e.wrapper){var r={};if(e.wrapper.forEach(function(e){r[e.key]=e.value}),n()(r)===n()(e.preview))return;e.preview=null,setTimeout(function(){e.preview=r})}},500)},add:function(){var e=this;this.$refs.edit.validate(function(t){t&&e.$confirm("确定保存？","提示",{type:"info"}).then(function(){null!=e.wrapper&&e.wrapper.length>0&&(e.form.wrapper=n()(e.wrapper)),e.$route.params.id?Object(i._18)(e.form).then(function(t){e.$transfer({back:"返回编辑",buttons:[{text:"去列表",link:"/provider/list"}]})}).catch(function(e){console.log(e)}):Object(i.f)(e.form).then(function(t){e.$transfer({back:"继续添加",buttons:[{text:"去列表",link:"/provider/list"}]})}).catch(function(e){console.log(e)})})})},addWrapperColumn:function(){this.wrapper.push({key:"",value:"",data:0===this.wrapper.filter(function(e){return e.data}).length})},deleteWrapperColumn:function(e){this.wrapper.splice(e,1),0===this.wrapper.filter(function(e){return e.data}).length&&this.wrapper.length>0&&(this.wrapper[0].data=!0)},onDataColumnSwitch:function(e){this.wrapper.forEach(function(e){e.data=!1}),this.wrapper[e].data=!0}},mounted:function(){this.init()},components:{"v-jsonformatter":function(){return r.e(33).then(r.bind(null,"9YOq"))}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h4",{staticClass:"title"},[e._v(e._s(e.title))]),e._v(" "),r("hr"),e._v(" "),r("el-form",{ref:"edit",staticClass:"min_width",attrs:{model:e.form,"label-width":"8em"}},[r("el-form-item",{attrs:{label:"服务名称:",rules:[{required:!0,message:"请输入模块名称",trigger:["blur","change"]}],prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入模块名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"应用别名:",rules:[{required:!0,message:"请输入应用别名",trigger:["blur","change"]}],prop:"alias"}},[r("el-input",{attrs:{placeholder:"请输入应用别名"},model:{value:e.form.alias,callback:function(t){e.$set(e.form,"alias",t)},expression:"form.alias"}})],1),e._v(" "),e._l(e.ENV_DOMAIN_MAP,function(t,a){return r("el-form-item",{key:a,attrs:{label:t+"域名:",rules:[{required:!0,message:"请输入"+t+"域名",trigger:["blur","change"]}],prop:a}},[r("el-input",{attrs:{placeholder:"请输入"+t+"域名"},model:{value:e.form[a],callback:function(t){e.$set(e.form,a,t)},expression:"form[key]"}})],1)}),e._v(" "),r("el-form-item",{attrs:{label:"返回值包装类:"}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus",circle:"",size:"small"},on:{click:function(t){return e.addWrapperColumn()}}}),e._v(" "),r("div",{staticClass:"mark"},[e._v("返回数据字段只能设置一个")])],1),e._v(" "),e._l(e.wrapper,function(t,a){return e.wrapper?r("el-form-item",{key:a},[r("el-input",{staticClass:"param-key",attrs:{placeholder:"请输入字段名"},model:{value:t.key,callback:function(r){e.$set(t,"key",r)},expression:"w.key"}}),e._v(" "),r("el-input",{staticClass:"param-value",attrs:{placeholder:"备注，没有可以不写"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"w.value"}}),e._v(" "),r("el-radio",{attrs:{label:!0},on:{change:function(t){return e.onDataColumnSwitch(a)}},model:{value:t.data,callback:function(r){e.$set(t,"data",r)},expression:"w.data"}},[e._v("设置为数据字段")]),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(t){return e.deleteWrapperColumn(a)}}})],1):e._e()}),e._v(" "),r("el-form-item",{staticStyle:{"min-height":"400px"},attrs:{label:"包装类预览:"}},[e.preview?r("v-jsonformatter",{attrs:{json:e.preview,height:360}}):e._e()],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.add}},[e._v("提交")]),e._v(" "),r("el-button",{attrs:{type:"info",icon:"el-icon-back"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1)],2)],1)},staticRenderFns:[]};var c=r("C7Lr")(o,s,!1,function(e){r("VC3w")},"data-v-639d7b12",null);t.default=c.exports}});
//# sourceMappingURL=3.ef4db01f2ed7e61341ea.js.map