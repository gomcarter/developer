webpackJsonp([14],{EF2H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("lC5x"),a=n.n(r),i=n("J0Oq"),l=n.n(i),o=n("aA9S"),s=n.n(o),c=n("0Njg"),d=n("R2SV"),f={name:"interfaces",data:function(){var e=this;return{form:{name:null,mark:null},endListApi:c.v,javaListApi:c.X,filter:{interfacesId:null,name:null,deprecated:null,url:null,controller:null,javaId:null,endId:null},interfacesList:[],dataUrl:c.n,countUrl:c.m,favoriteTree:null,toBeSelectedTree:null,params:{},toolbar:[{title:"设置",icon:"el-icon-setting",handler:function(){var t=e.$refs.dg.getSelected();0!==t.length?(e.editingIdList=t.map(function(e){return e.id}),Object(c.x)().then(function(t){e.toBeSelectedTree=t||[],e.$refs.favoriteBindingDialog.open()})):e.$alert("请至少选择一个接口","提示",{type:"error"})}}],editingIdList:null,columns:[{field:"action",header:"操作",width:180,html:!0,actions:[{text:function(e){return'<a href="#/test/'+e.interfacesId+'/testDomain" target="_blank">执行</a>'}},{text:"删除",handler:function(t){return e.delete(t.id)}}]},{field:"interfacesId",header:"接口编号",width:80},{field:"name",header:"接口名称",width:200,html:!0,formatter:function(e,t,n){return'<a href="#/interfaces/view/'+e.interfacesId+'" target="_blank">'+n+"</a>"}},{field:"method",header:"METHOD",width:80},{field:"deprecated",header:"废弃",html:!0,width:80,formatter:function(e,t,n){return n?"是".fontcolor("red"):"否"}},{field:"url",header:"URL",width:120},{field:"java.name",header:"后端服务",width:160},{field:"end.name",header:"前端项目",width:160}]}},mounted:function(){var e=this;Object(c.x)().then(function(t){e.favoriteTree=t||[]})},methods:{bindFavorite:function(){var e=this,t=this.$refs.favoriteTree.getSelected()[0];Object(c.j)(this.editingIdList,t).then(function(t){e.$success("操作成功！"),e.$refs.favoriteBindingDialog.close(),e.search(),e.editingIdList.length=0,e.$refs.dg.clearSelections()})},onTreeSelectionChanged:function(e){this.params=s()({},this.params,{favoriteCode:e[0]})},onSortChanged:function(e,t){Object(c._10)(e.id,t).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},onCreate:function(e,t){var n=this;return l()(a.a.mark(function r(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(c.w)(t?t.id:null,e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r,n)}))()},onUpdate:function(e){var t=this;return l()(a.a.mark(function n(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,Object(c.y)(e.id,e.text);case 3:case"end":return t.stop()}},n,t)}))()},delete:function(e){var t=this;this.$confirm("删除将无法恢复，确认删除吗？","提示",{type:"warning"}).then(function(){Object(c.o)(e).then(function(){t.$success("删除成功！"),t.search()})})},search:function(){this.params=s()({favoriteCode:this.params.favoriteCode},Object(d.g)(this.filter))},clear:function(){this.params=s()({favoriteCode:this.params.favoriteCode}),this.filter={},this.$refs.back.clear(),this.$refs.front.clear(),this.$refs.status.clear()}},components:{"v-tree":function(){return n.e(37).then(n.bind(null,"BBpc"))},"v-datagrid":function(){return n.e(32).then(n.bind(null,"mW4C"))},"v-selector":function(){return n.e(30).then(n.bind(null,"qNHp"))},"v-dialog":function(){return n.e(31).then(n.bind(null,"j9Pd"))}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h4",{staticClass:"title"},[e._v("筛选条件")]),e._v(" "),n("hr"),e._v(" "),n("div",{staticClass:"filters"},[n("el-form",{attrs:{inline:!0,model:e.filter,"label-width":"6em"}},[n("el-form-item",{attrs:{label:"编号"}},[n("el-input",{attrs:{type:"number",placeholder:"请输入接口编号"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.interfacesId,callback:function(t){e.$set(e.filter,"interfacesId",t)},expression:"filter.interfacesId"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"接口名称"}},[n("el-input",{attrs:{placeholder:"请输入接口名称"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"控制器"}},[n("el-input",{attrs:{placeholder:"请输入控制器"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.controller,callback:function(t){e.$set(e.filter,"controller",t)},expression:"filter.controller"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"URL"}},[n("el-input",{attrs:{placeholder:"请输入URL"},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.filter.url,callback:function(t){e.$set(e.filter,"url",t)},expression:"filter.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"是否废弃"}},[n("v-selector",{ref:"status",attrs:{data:{true:"是",false:"否"},onSelectionChanged:function(t){return e.filter.deprecated=(t[0]||{}).id},placeholder:"请选择是否废弃"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"后端服务"}},[n("v-selector",{ref:"back",attrs:{id:"id",text:"name",onSelectionChanged:function(t){return e.filter.javaId=(t[0]||{}).id},filterable:!0,remote:!0,placeholder:"请选择后端服务（可输入名称进行搜索）",url:e.javaListApi}})],1),e._v(" "),n("el-form-item",{attrs:{label:"前端项目"}},[n("v-selector",{ref:"front",attrs:{id:"id",text:"name",onSelectionChanged:function(t){return e.filter.endId=(t[0]||{}).id},filterable:!0,remote:!0,placeholder:"请选择前端项目（可输入名称进行搜索）",url:e.endListApi}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),n("el-button",{attrs:{type:"info",icon:"el-icon-delete"},on:{click:e.clear}},[e._v("清空")])],1)],1)],1),e._v(" "),n("h4",{staticClass:"title"},[e._v("我的接口列表")]),e._v(" "),n("hr"),e._v(" "),n("el-container",[n("el-main",{staticClass:"favorite-container",style:{width:"20%"}},[n("v-tree",{attrs:{datas:e.favoriteTree,id:"code",onSelectionChanged:e.onTreeSelectionChanged,editable:!0,onCreate:e.onCreate,onUpdate:e.onUpdate,onSortChanged:e.onSortChanged}})],1),e._v(" "),n("el-aside",{staticClass:"interfaces-list-container",style:{width:"79%"}},[n("v-datagrid",{ref:"dg",attrs:{columns:e.columns,"data-url":e.dataUrl,"count-url":e.countUrl,params:e.params,toolbar:e.toolbar,checkable:!0}})],1)],1),e._v(" "),n("v-dialog",{ref:"favoriteBindingDialog",attrs:{title:"绑定收藏夹",width:450,ok:e.bindFavorite}},[n("div",{staticStyle:{height:"300px","overflow-y":"auto"},attrs:{slot:"body"},slot:"body"},[n("v-tree",{ref:"favoriteTree",attrs:{datas:e.toBeSelectedTree,id:"code"}})],1)])],1)},staticRenderFns:[]};var h=n("C7Lr")(f,u,!1,function(e){n("GApp")},"data-v-71e17a7d",null);t.default=h.exports},GApp:function(e,t){}});
//# sourceMappingURL=14.12c9106727385c05e287.js.map